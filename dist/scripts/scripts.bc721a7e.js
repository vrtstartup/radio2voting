"use strict";angular.module("hearkenApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngMessages","ngMaterial","firebase","LocalStorageModule"]).config(["$routeProvider",function(a){a.when("/main/:regio",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/results/:regio",{templateUrl:"views/results.html",controller:"ResultsCtrl",controllerAs:"results"}).when("/admin",{templateUrl:"views/admin.html",controller:"AdminCtrl",controllerAs:"admin"}).otherwise({redirectTo:"/main/limburg"})}]).config(["localStorageServiceProvider",function(a){a.setPrefix("radio2voting")}]),angular.module("hearkenApp").controller("MainCtrl",["$scope","$firebaseArray","$routeParams",function(a,b,c){a.regio=c.regio,a.send=!1;var d=b(new Firebase("https://radio2form.firebaseio.com/questions"));a.addQuestion=function(b){b.regio=c.regio,b.votes=0,b.shortlist=!1,d.$add(b).then(function(b){var c=b.key();console.log("added record with id "+c),d.$indexFor(c),a.send=!0})}}]),angular.module("hearkenApp").controller("ResultsCtrl",["$scope","$firebaseArray","$routeParams","localStorageService",function(a,b,c,d){var e=d.get("voted");e===!0?a.voted=!0:a.voted=!1,a.send=!1,a.regio=c.regio;var f=b(new Firebase("https://radio2form.firebaseio.com/questions"));a.list=f,a.vote=function(b){console.log("voting"),b.votes=b.votes+1,a.list.$save(b),a.send=!0,d.set("voted",!0)}}]),angular.module("hearkenApp").controller("AdminCtrl",["$scope","$firebaseArray","$routeParams","localStorageService",function(a,b,c,d){d.clearAll();var e=b(new Firebase("https://radio2form.firebaseio.com/questions"));a.list=e,a.regios=[{name:"Oost-Vlaanderen",value:"oost-vlaanderen"},{name:"Antwerpen",value:"antwerpen"},{name:"alles",value:void 0}]}]),angular.module("hearkenApp").run(["$templateCache",function(a){a.put("views/admin.html",'<md-radio-group ng-model="selectedRegio"> <md-radio-button ng-repeat="r in regios" ng-value="r.value" aria-label="regios"> {{ r.name }} </md-radio-button> </md-radio-group> <md-list> <md-list-item class="md-2-line" ng-repeat="item in list | filter:selectedRegio" ng-click="doNothing()"> <md-input-container class="md-block"> <md-checkbox ng-model="item.shortlist" aria-label="Shortlisted?" ng-change="list.$save(item)"> </md-checkbox> </md-input-container> <md-input-container class="md-block"> <label>Vraag</label> <textarea name="question" ng-model="item.question" ng-change="list.$save(item)"></textarea> </md-input-container> <md-input-container class="md-block"> <label>Naam</label> <input name="name" ng-model="item.name" ng-change="list.$save(item)"> </md-input-container> <md-input-container class="md-block"> <label>Email</label> <input name="email" ng-model="item.email" ng-change="list.$save(item)"> </md-input-container> <md-input-container class="md-block"> <label>Telefoonnummer</label> <input name="phone" ng-model="item.phone" ng-change="list.$save(item)"> </md-input-container> <md-input-container class="md-block"> <label>Regio</label> <input name="regio" ng-model="item.regio" ng-change="list.$save(item)"> </md-input-container> <md-input-container class="md-block"> <label>Stemmen</label> <input name="votes" ng-model="item.votes" ng-change="list.$save(item)"> </md-input-container> <md-button ng-click="list.$remove(item)">Verwijder</md-button> </md-list-item></md-list>'),a.put("views/main.html",'<md-content flex> <p>Waar wil jij onze reporter op afsturen? Laat het ons hier weten.</p> <div layout="row" class="questions-form" layout-align="center start"> <form name="questionsForm"> <md-input-container class="md-block"> <label>Jouw vraag/suggestie</label> <textarea name="question" ng-model="form.question" required></textarea> <div ng-messages="questionsForm.question.$error"> <div ng-message="required">Dit is verplicht.</div> </div> </md-input-container> <md-input-container class="md-block"> <label>Je naam</label> <input required name="name" ng-model="form.name"> <div ng-messages="questionsForm.name.$error"> <div ng-message="required">Dit is verplicht.</div> </div> </md-input-container> <md-input-container class="md-block"> <label>Je emailadres</label> <input required type="email" name="email" ng-model="form.email" ng-pattern="/^.+@.+\\..+$/"> <div ng-messages="questionsForm.email.$error" role="alert"> <div ng-message-exp="[\'required\', \'pattern\']"> Je emailadres lijkt niet helemaal correct te zijn. </div> </div> </md-input-container> <md-input-container class="md-block"> <label>Je telefoonnummer</label> <input name="phone" ng-model="form.phone"> </md-input-container> <md-button style="width:100%" ng-click="addQuestion(form)" ng-disabled="!questionsForm.$valid">Verstuur je vraag</md-button> </form> </div> <div ng-if="send" ng-class="{\'questions-send--visible\': send}" class="questions-send fade" layout="column" layout-align="center center" layout-padding> <h1>Bedankt voor je inzending, {{form.name}}</h1> <p>De redactie gaat meteen met je vraag aan de slag!</p> </div> </md-content>'),a.put("views/results.html",'<md-content flex class="shortlist"> <div layout="column" class="shortlist-form" layout-align="center start"> <p>Waar wil jij onze reporter op afsturen? Stem door te klikken op jouw vraag naar keuze.</p> <md-list> <md-list-item class="shortlist-questions" ng-repeat="item in list | filter:regio" ng-if="item.shortlist" ng-click="vote(item)"> <div class="shortlist-icon"> <svg class="shortlist-icon__svg" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path d="M0 0h24v24H0z" fill="none"> <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"> </svg> </div> <p class="shortlist-question">{{item.question}}</p> </md-list-item> </md-list> </div> <div ng-if="send" ng-class="{\'questions-send--visible\': send}" class="questions-send fade" layout="column" layout-align="center center" layout-padding> <h1>Bedankt voor je stem.</h1> </div> <div ng-if="voted" class="questions-send fade" layout="column" layout-align="center center" layout-padding> <h1>Je hebt al eens gestemd.</h1> </div> </md-content>')}]);